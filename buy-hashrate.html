<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TrustDollar ‚Äî Cloud Mining</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">
<style>
:root {
  --green: #16a34a;
  --bg: #f8fafc;
  --text-dark: #0f172a;
}
body {
   
  font-family: "Poppins", sans-serif;
  background: var(--bg);
  color: var(--text-dark);
  padding: 20px;
  display: flex;
  justify-content: center;
}
.card {
  background: #fff;
  padding: 25px;
  border-radius: 5px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  width: 100%;
  max-width: 850px;
  transition: all 0.3s ease;
}
.wallet {
  display: flex;
  justify-content: space-between;
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
  border-radius: 12px;
  padding: 12px 18px;
  margin-bottom: 20px;
  font-weight: 600;
  color: #14532d;
}
.plans {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
  margin-top: 25px;
}
.plan {
  background: #ffffff;
  border: 1.5px solid #e5e7eb;
  border-radius: 5px;
  text-align: center;
  padding: 18px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.05);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.plan:hover {
  transform: translateY(-6px);
  box-shadow: 0 6px 18px rgba(22,163,74,0.2);
}
.plan h3 {
  color: var(--green);
  margin-bottom: 8px;
  font-weight: 700;
}
.plan p {
  font-size: 14px;
  color: #475569;
  margin: 5px 0;
}
.btn {
  background: linear-gradient(135deg,#ddc203,#22c55e);
  color: #fff;
  padding: 12px;
  border: none;
  border-radius: 5px;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  margin-top: 12px;
  transition: all 0.2s ease;
}
.btn:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(22,163,74,0.3);
}
.profit-box {
  background: #ecfdf5;
  border: 1px solid #bbf7d0;
  border-radius: 5px;
  padding: 14px;
  margin: 16px 0;
  font-size: 15px;
  color: #166534;
  line-height: 1.6;
}

/* ‚úÖ Smooth Modal (no flicker, with fade + zoom animation) */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(10px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 5000;
  opacity: 0;
  transition: opacity 0.35s ease-in-out;
}

/* Show state ‚Äî smooth fade in */
.modal.show {
  display: flex;
  opacity: 1;
}

/* ‚úÖ Centered Card with Depth */
.modal-card {
  width: 90%;
  max-width: 420px;
  border-radius: 5px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 12px 50px rgba(0, 0, 0, 0.3);
  transform: scale(0.9) translateY(20px);
  opacity: 0;
  transition: all 0.35s ease-in-out;
}

/* When modal is visible ‚Äî card smoothly expands and fades in */
.modal.show .modal-card {
  transform: scale(1) translateY(0);
  opacity: 1;
}

/* Header */
.modal-head {
  background: linear-gradient(135deg, #16a34a, #22c55e);
  color: #fff;
  padding: 18px;
  text-align: center;
  position: relative;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.modal-head h2 {
  margin: 0;
  font-size: 1.3rem;
}
.close-btn {
  position: absolute;
  top: 12px;
  right: 16px;
  border: none;
  background: none;
  font-size: 24px;
  color: #fff;
  cursor: pointer;
  opacity: 0.9;
  transition: 0.2s;
}
.close-btn:hover {
  opacity: 1;
  transform: scale(1.2);
}

/* Body */
.modal-body {
  background: #fff;
  padding: 22px;
  text-align: center;
}
.modal-body p {
  margin: 8px 0;
  color: #475569;
  font-size: 15px;
}
.wallet-line {
  margin-top: 10px;
  font-weight: 600;
  color: #0f172a;
}
.modal-error {
  display: none;
  color: #dc2626;
  font-weight: 600;
  margin: 8px 0;
}

/* Buttons */
.modal-actions {
  display: flex;
  gap: 10px;
  margin-top: 18px;
}
.confirm-btn {
  flex: 1;
  background: linear-gradient(135deg, #16a34a, #22c55e);
  color: #fff;
  border: none;
  border-radius: 5px;
  padding: 12px;
  font-weight: 600;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.confirm-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 14px rgba(22, 163, 74, 0.4);
}
.cancel-btn {
  flex: 1;
  background: #f1f5f9;
  color: #0f172a;
  border: none;
  border-radius: 5px;
  padding: 12px;
  font-weight: 600;
  font-size: 15px;
  cursor: pointer;
  transition: 0.2s;
}
.cancel-btn:hover {
  background: #e2e8f0;
}

/* ‚úÖ Responsive Fix */
@media (max-width: 480px) {
  .card { padding: 16px; }
  .plan { padding: 14px; }
  .modal-body { padding: 18px; }
}
/* allert sms pop up ke liye */
.center-alert {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  background: rgba(22, 163, 74, 0.95);
  color: #fff;
  padding: 14px 28px;
  border-radius: 5px;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  box-shadow: 0 10px 30px rgba(22, 163, 74, 0.4);
  opacity: 0;
  z-index: 9999;
  transition: all 0.4s ease;
  pointer-events: none;
}
.center-alert.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}
@keyframes fadeOut {
  from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  to { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
}


/* üíé Plan Summary Box */
.plan-summary {
  border: 1.5px solid #d1fae5;
  background: #f0fdf4;
  border-radius: 5px;
  padding: 16px 18px;
  margin-bottom: 16px;
  box-shadow: 0 2px 8px rgba(22, 163, 74, 0.1);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  font-size: 15px;
  color: #064e3b;
  font-weight: 500;
  border-bottom: 1px dashed #bbf7d0;
  padding-bottom: 6px;
}

.summary-row:last-child {
  border-bottom: none;
}

.summary-row strong {
  color: #065f46;
  font-weight: 600;
}

.wallet-info {
  background: #dcfce7;
  border-radius: 5px;
  padding: 6px 10px;
  box-shadow: inset 0 0 5px rgba(22,163,74,0.15);
}

/* ‚ö†Ô∏è Animated Pro Alert */
.balance-alert {
  display: none;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: linear-gradient(90deg, #fef3c7, #fde68a);
  border: 1.5px solid #facc15;
  color: #92400e;
  font-weight: 600;
  padding: 10px 16px;
  border-radius: 5px;
  margin-top: 12px;
  font-size: 15px;
  box-shadow: 0 4px 14px rgba(250, 204, 21, 0.35);
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.4s ease-in-out;
}

.balance-alert.show {
  display: flex;
  opacity: 1;
  transform: translateY(0);
}

.alert-icon {
  font-size: 18px;
  animation: pulseIcon 1.2s infinite;
}

@keyframes pulseIcon {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
}

#activeCountdown {
  font-weight: 700;
  color: #16a34a;
  letter-spacing: 0.5px;
}
/* üåÄ Circular Countdown Ring */
.progress-ring {
  position: relative;
  width: 80px;
  height: 80px;
  margin: 10px auto;
}

.ring {
  transform: rotate(-90deg);
}

.ring-bg,
.ring-fill {
  fill: none;
  stroke-width: 6;
  cx: 40;
  cy: 40;
  r: 35;
}

.ring-bg {
  stroke: #d1fae5;
}

.ring-fill {
  stroke: #16a34a;
  stroke-linecap: round;
  stroke-dasharray: 220;
  stroke-dashoffset: 220; /* ‚úÖ fixed default position */
  transition: stroke-dashoffset 1s linear;
}



.ring-time {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 14px;
  font-weight: 600;
  color: #065f46;
}
@keyframes fadeSlide {
  from {opacity: 0; transform: translateY(-3px);}
  to {opacity: 1; transform: translateY(0);}
}

.plan .buy-btn:disabled {
  background: linear-gradient(135deg, #9ca3af, #d1d5db);
  color: #1f2937;
  cursor: not-allowed;
  box-shadow: none;
}

#activePlanBox {
  display: grid;
  gap: 12px;
}

.status-badge {
  display: inline-block;
  background: #16a34a;
  color: #fff;
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 5px;
  margin-bottom: 6px;
}
.status-badge.completed {
  background: #dc2626;
}

/* üïí Active Plan Countdown Box */
.countdown-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: linear-gradient(145deg, #ecfdf5, #ffffff);
  border: 1.5px solid #bbf7d0;
  border-radius: 5px;
  padding: 18px;
  margin-top: 10px;
  box-shadow: 0 4px 14px rgba(22, 163, 74, 0.15);
  transition: all 0.4s ease;
}

.countdown-box h4 {
  color: #065f46;
  font-weight: 700;
  font-size: 16px;
  margin-bottom: 10px;
}

.countdown-timer {
  font-size: 26px;
  font-weight: 700;
  letter-spacing: 2px;
  color: #16a34a;
  background: #dcfce7;
  padding: 8px 20px;
  border-radius: 5px;
  box-shadow: inset 0 0 5px rgba(22,163,74,0.25);
  transition: all 0.3s ease;
}

.countdown-timer.ready {
  background: #fee2e2;
  color: #dc2626;
  box-shadow: inset 0 0 5px rgba(220,38,38,0.25);
  animation: pulseReady 1.5s infinite;
}

@keyframes pulseReady {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.08); opacity: 0.8; }
}

.summary-row strong {
  color: #065f46;
  font-weight: 600;
  text-shadow: 0 1px 1px rgba(0,0,0,0.05);
}

/* üîπ Header layout fix for inline icon */
.header {
  display: flex;
  align-items: center;        /* vertical centering */
  justify-content: center;    /* center horizontally */
  gap: 10px;                  /* space between text and icon */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: #ffffff00;
   color: #21d82b; text-align: center;
   padding: 10px; font-size: 18px; font-weight: bold;          /* was too thick, now balanced */
  font-size: 18px;
  font-weight: bold;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  z-index: 1000;
}


/* üî¥ Header Info Button */
.guide-icon-btn {
  background: rgb(212 29 29);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 5px;
  width: 28px;
  height: 28px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: all 0.25s ease;
  margin-top: 1px;            /* üëà just to align perfectly */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.guide-icon-btn i {
  color: #ffffff;
  font-size: 15px;
}

.guide-icon-btn:hover {
  background: #fff;
  border-color: #fff;
}

.guide-icon-btn:hover i {
  color: #28a745;
  transform: scale(1.1);
}


/* ===== MOBILE FIX ===== */
@media (max-width: 480px) {
  .guide-icon-btn {
    width: 28px;
    height: 28px;
  }
  .guide-icon-btn i {
    font-size: 15px;
  }
}

/* üîπ Guide Popup Fullscreen Responsive */
.guide-popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.55);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

/* Show Popup */
.guide-popup.show {
  display: flex;
  opacity: 1;
}

/* Popup Card */
.guide-content {
  position: relative;
  background: #ffffff;
  border-radius: 5px;
  padding: 25px;
  width: 90%;
  max-width: 750px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
  animation: popupZoom 0.35s ease;
}

/* Hide vertical scrollbar */
.guide-content::-webkit-scrollbar {
  display: none;
}

/* Animation */
@keyframes popupZoom {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* Close Button */
.close-btn {
  position: absolute;
  top: 12px;
  right: 18px;
  border: none;
  background: none;
  color: #333;
  font-size: 24px;
  cursor: pointer;
  transition: 0.2s;
}
.close-btn:hover {
  color: #dc2626;
  transform: scale(1.2);
}

/* Responsive Fix */
@media (max-width: 600px) {
  .guide-content {
    width: 80%;
    padding: 18px;
    font-size: 14px;
  }
  .close-btn { top: 10px; right: 15px; font-size: 22px; }
}
/* Header fixed position ka compensation */
body {
  padding-top: 80px; /* jitna header ka height hai utna space */
}

/* Header ko thoda upar z-index de do taaki overlap sahi lage */
.buy-hashrate {
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 999;
}


/* plane histry butun */
  .pro-btn {
    background: linear-gradient(135deg, #3bff00, #00b4d8);
    color: white;
    padding: 14px 28px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    font-size: 18px;
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
    transition: all 0.3s ease;
    display: inline-block;
  }

  .pro-btn:hover {
    background: linear-gradient(135deg, #0056b3, #0077b6);
    box-shadow: 0 6px 18px rgba(0, 123, 255, 0.45);
    transform: translateY(-3px);
  }


/* ‚úÖ Ultra Clear Bottom Nav (No Blur, High Contrast) */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 94%;
  max-width: 480px;
  background: #ffffff; /* solid white */
  border: 1px solid #e0e0e0;
  border-radius: 5px;
  box-shadow: 0 -6px 20px rgba(0, 0, 0, 0.08);
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 10px 0;
  z-index: 1000;
  animation: slideUp 0.6s ease;
}

/* Slide animation */
@keyframes slideUp {
  from { transform: translate(-50%, 60px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}

/* Nav Items */
.nav-item {
  flex: 1;
  text-align: center;
  color: #888;
  font-size: 12px;
  text-decoration: none;
  transition: all 0.25s ease;
  position: relative;
  padding: 4px 0;
}

/* Icons */
.nav-item i {
  font-size: 22px;
  display: block;
  margin-bottom: 3px;
  color: #666;
  transition: all 0.25s ease;
  filter: none; /* remove soft edges */
}

/* Hover & Active */
.nav-item:hover i,
.nav-item.active i {
  color: #00c853;
  transform: translateY(-3px) scale(1.15);
  text-shadow: 0 0 8px rgba(0, 200, 83, 0.4);
}

.nav-item:hover span,
.nav-item.active span {
  color: #00c853;
  font-weight: 600;
}

/* Glow dot under active item */
.nav-item.active::after {
  content: "";
  position: absolute;
  bottom: -3px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 6px;
  background: #00c853;
  border-radius: 5px;
  box-shadow: 0 0 8px rgba(0, 200, 83, 0.4);
}

/* Responsive fix */
@media(max-width:600px){
  .bottom-nav {
    border-radius: 22px;
    padding: 8px 0;
  }
  .nav-item i {
    font-size: 20px;
  }
}
</style>
</head>

<body>
  <!-- üåü 3D Auto-Hide Alert Box -->
<div id="customAlert" class="alert-box"></div>

<!-- üåü Glass 3D Alert Box -->
<div id="glassAlert" class="glass-alert">
  <div class="alert-content">
    <span id="closeAlert" class="close-btn">√ó</span>
    <h2 id="alertTitle">ERROR</h2>
    <p id="alertMessage">Ready to Start</p>
    <button id="alertOk">OK</button>
  </div>
</div>

<style>
  /* Background overlay */
  .glass-alert {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.45);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 3000;
    backdrop-filter: blur(6px);
  }

  /* Card style (Glassmorphism) */
  .alert-content {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(18px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    border-radius: 16px;
    padding: 25px 30px;
    text-align: center;
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.25);
    animation: popIn 0.4s ease;
    color: white;
    width: 240px;
    position: relative;
  }

  .alert-content h2 {
    margin: 0;
    font-size: 22px;
    letter-spacing: 2px;
    font-weight: 600;
  }

  .alert-content p {
    margin: 12px 0 20px;
    font-size: 14px;
    color: #e0e0e0;
    line-height: 1.4;
  }

  /* OK button */
  #alertOk {
    background: rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.35);
    color: white;
    font-weight: 500;
    padding: 8px 22px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
  }

  #alertOk:hover {
    background: rgba(255, 255, 255, 0.45);
    transform: scale(1.05);
  }

  /* Close X button */
  .close-btn {
    position: absolute;
    top: 8px;
    right: 12px;
    font-size: 18px;
    color: #ff4d4d;
    cursor: pointer;
    transition: 0.3s;
  }

  .close-btn:hover {
    transform: scale(1.2);
  }

  @keyframes popIn {
    from {
      transform: scale(0.85);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: scale(1);
    }
    to {
      opacity: 0;
      transform: scale(0.9);
    }
  }
</style>


<script>
  // üî• Function to show the smooth alert
  function showGlassAlert(title = "ERROR", message = "Something went wrong!", autoHide = true, duration = 3000) {
    const alertBox = document.getElementById("glassAlert");
    const alertTitle = document.getElementById("alertTitle");
    const alertMessage = document.getElementById("alertMessage");

    alertTitle.textContent = title;
    alertMessage.textContent = message;

    alertBox.style.display = "flex";
    alertBox.querySelector(".alert-content").style.animation = "popIn 0.4s ease";

    // Auto hide after duration
    if (autoHide) {
      setTimeout(() => {
        alertBox.querySelector(".alert-content").style.animation = "fadeOut 0.4s ease";
        setTimeout(() => {
          alertBox.style.display = "none";
        }, 400);
      }, duration);
    }
  }

  // Close alert manually
  document.getElementById("closeAlert").onclick = () => {
    document.getElementById("glassAlert").style.display = "none";
  };
  document.getElementById("alertOk").onclick = () => {
    document.getElementById("glassAlert").style.display = "none";
  };
</script>


<!-- üîπ Header with Guide Button -->
<div class="header">
  <span>Buy Hashrate</span>
  <button class="guide-icon-btn" onclick="openMiningGuide()" title="Buy Hashrate Guide">
    <i class="fa-solid fa-circle-info"></i>
  </button>
</div>

<!-- üîπ Buy Hashrate Guide Popup -->
<div id="miningGuidePopup" class="guide-popup">
  <div class="guide-content">
    <button class="close-btn" onclick="closeMiningGuide()">&times;</button>
    <h2><i class="fa-solid fa-circle-info"></i> Buy Hashrate Guide</h2>

    <p>
      Welcome to <b>TrustDollar Cloud Mining</b> ‚Äî here‚Äôs everything you need to know before purchasing a <b>Buy Hashrate</b> plan.
    </p>

    <div class="guide-section">
      <h3>‚úÖ How to Buy a Plan</h3>
      <ul>
        <li>Make sure you have enough balance in your <b>wallet</b>.</li>
        <li>You can only buy up to your <b>lifetime deposit limit</b>.</li>
        <li>Select your plan and click <b>Buy</b> to confirm.</li>
        <li>Your plan becomes <b>Active</b> instantly and starts generating daily profit.</li>
      </ul>
    </div>

    <div class="guide-section">
      <h3>üíπ How Daily Profit Works</h3>
      <ul>
        <li>You‚Äôll continue receiving <b>daily profit</b> and <b>commission</b> until your plan duration ends.</li>
        <li>Every 24 hours, click the <b>‚ÄúCollect Profit‚Äù</b> button to transfer profit to your wallet.</li>
        <li>After completion, your <b>investment + total profit</b> automatically returns to your wallet.</li>
      </ul>
    </div>

    <div class="guide-section">
      <h3>üí∞ Referral Income System (3 Levels)</h3>
      <ul>
        <li><b>Level 1:</b> 17% of your direct partner‚Äôs profit.</li>
        <li><b>Level 2:</b> 8% of your second-level partner‚Äôs profit.</li>
        <li><b>Level 3:</b> 5% of your third-level partner‚Äôs profit.</li>
        <li>Referral income continues daily while your plan is active.</li>
      </ul>
    </div>

    <div class="guide-section">
      <h3>‚ö†Ô∏è Important Notes</h3>
      <ul>
        <li>You cannot buy a new plan until your current one completes.</li>
        <li>Profit percentage is based on your selected plan (2.1% ‚Äì 5%).</li>
        <li>Even if you close the app, your plan continues automatically.</li>
      </ul>
    </div>

    <p class="guide-footer">
      Need help? Our support is available 24/7.<br>
      <a href="support.html" target="_blank">üì© Contact Support</a>
    </p>
  </div>
</div>



<div class="card">
  <div class="wallet">
    <div><strong>Wallet:</strong> <span id="walletBalance">$0.00</span></div>
    <div><strong>Locked:</strong> <span id="lockedBalance">$0.00</span></div>
  </div>
  
<!-- üåê Professional Button -->
<div style="text-align:center; margin: 25px 0;">
  <a href="hashratehistry.html" target="_blank" class="pro-btn">
    Activate Plan
  </a>
</div>

<div class="plans">
  <div class="plan">
    <h3>Plan 1</h3>
    <p>$500 / 20 days</p>
    <p>1.7% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 1', 500, 20, 1.7)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 2</h3>
    <p>$700 / 30 days</p>
    <p>1.8% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 2', 700, 30, 1.8)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 3</h3>
    <p>$900 / 40 days</p>
    <p>1.9% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 3', 900, 40, 1.9)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 4</h3>
    <p>$1100 / 50 days</p>
    <p>2.0% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 4', 1100, 50, 2.0)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 5</h3>
    <p>$1300 / 60 days</p>
    <p>2.1% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 5', 1300, 60, 2.1)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 6</h3>
    <p>$1500 / 70 days</p>
    <p>2.2% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 6', 1500, 70, 2.2)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 7</h3>
    <p>$1700 / 80 days</p>
    <p>2.3% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 7', 1700, 80, 2.3)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 8</h3>
    <p>$1900 / 90 days</p>
    <p>2.4% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 8', 1900, 90, 2.4)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 9</h3>
    <p>$2100 / 100 days</p>
    <p>2.5% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 9', 2100, 100, 2.5)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 10</h3>
    <p>$2300 / 110 days</p>
    <p>2.6% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 10', 2300, 110, 2.6)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 11</h3>
    <p>$2500 / 120 days</p>
    <p>2.7% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 11', 2500, 120, 2.7)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 12</h3>
    <p>$2700 / 130 days</p>
    <p>2.8% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 12', 2700, 130, 2.8)">Buy</button>
  </div>

  <div class="plan">
    <h3>Plan 13</h3>
    <p>$2900 / 140 days</p>
    <p>2.9% Daily</p>
    <button class="btn buy-btn" onclick="openModal('Plan 13', 2900, 140, 2.9)">Buy</button>
  </div>
</div>

<div class="plan">
  <h3>üíº Custom Plan</h3>
  <p>Enter your own amount (Min $3000)</p>
  <p>Dynamic Profit Based on Investment</p>

  <input 
    type="number" 
    id="customAmount" 
    min="3000" 
    placeholder="Enter Amount (Min $3000)" 
    style="margin-top:10px; padding:8px; width:80%; border-radius:8px; border:1px solid #ccc; text-align:center;"
  />

  <button class="btn buy-btn" onclick="handleCustomPlan()">Buy</button>
</div>

<script>
  function handleCustomPlan() {
    const amount = parseFloat(document.getElementById("customAmount").value);

    if (isNaN(amount)) {
      showGlassAlert(" Please enter a valid amount.");
      return;
    }

    if (amount < 3000) {
      showGlassAlert(" Minimum amount is $3000.");
      return;
    }

    let days, percent;

    if (amount >= 3000 && amount < 5000) {
      percent = 3.0;
      days = 120;
    } else if (amount >= 5000 && amount < 10000) {
      percent = 3.5;
      days = 140;
    } else if (amount >= 10000 && amount < 20000) {
      percent = 4.0;
      days = 160;
    } else {
      percent = 4.5;
      days = 180;
    }

    // ‚úÖ Opens your existing modal
    openModal('Custom Plan', amount, days, percent);
  }
</script>


  <!-- ‚ö° Center Alert Message -->
  <div id="centerAlert" class="center-alert"></div>

  <!-- üíé Centered Modal -->
  <div class="modal" id="planModal">
    <div class="modal-card">
      <div class="modal-head">
        <h2 id="mTitle">BUY PLAN</h2>
        <button class="close-btn" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="plan-summary">
          <div class="summary-row">
            <span> Duration:</span>
            <strong id="mDays">45 days</strong>
          </div>
          <div class="summary-row">
            <span> Daily Profit:</span>
            <strong id="mProfit">2.5%</strong>
          </div>
          <div class="summary-row">
            <span> Plan Cost:</span>
            <strong id="mCost">$500</strong>
          </div>
          <div class="summary-row wallet-info">
            <span> Wallet:</span>
            <strong id="mWallet">$0.00</strong>
          </div>
        </div>

        <!-- ‚ö†Ô∏è Smart Animated Alert -->
        <div id="mError" class="balance-alert">
          <span class="alert-icon">‚ö†Ô∏è</span>
          <span class="alert-text">Insufficient Balance!</span>
        </div>

        <div class="modal-actions">
          <button class="confirm-btn" id="mConfirm">Confirm Purchase</button>
          <button class="cancel-btn" onclick="closeModal()">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>
</body>

<div class="bottom-nav">
  <a href="Dashboard.html" class="nav-item active"><i class='bx bxs-dashboard'></i><span>Home</span></a>
  <a href="mining.html" class="nav-item"><i class='bx bxs-coin-stack'></i><span>Invest</span></a>
  <a href="promotion.html" class="nav-item"><i class='bx bxs-user-plus'></i><span>Refer</span></a>
  <a href="account.html" class="nav-item"><i class='bx bxs-user-circle'></i><span>Account</span></a>
</div>


<script>
function openMiningGuide() {
  const popup = document.getElementById("miningGuidePopup");
  popup.classList.add("show");
}

function closeMiningGuide() {
  const popup = document.getElementById("miningGuidePopup");
  popup.classList.remove("show");
}
</script>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
import {
  getFirestore, doc, getDoc, updateDoc, addDoc,
  collection, serverTimestamp, query, where, getDocs
} from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDEQYPJFxQv8yFHptrTqoLHOn2L0PpgVhc",
  authDomain: "btcinvest-c0e25.firebaseapp.com",
  projectId: "btcinvest-c0e25",
  storageBucket: "btcinvest-c0e25.firebasestorage.app",
  messagingSenderId: "204937458487",
  appId: "1:204937458487:web:cc27ece1249999279f60b2"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

let walletBalance = 0, lockedBalance = 0;

onAuthStateChanged(auth, async (user) => {
  if (!user) {
    window.location.href = "login.html";
    return;
  }

  const ref = doc(db, "users", user.uid);
  const snap = await getDoc(ref);

  if (snap.exists()) {
    const d = snap.data();
    walletBalance = d.walletBalance || 0;
    lockedBalance = d.lockedBalance || 0;
    document.getElementById("walletBalance").textContent = `$${walletBalance.toFixed(2)}`;
    document.getElementById("lockedBalance").textContent = `$${lockedBalance.toFixed(2)}`;
  }

  // üîç Check active plan
  const q = query(
    collection(db, "buyhashrate"),
    where("userId", "==", user.uid),
    where("status", "==", "running")
  );

  const res = await getDocs(q);

  if (!res.empty) {
    const ringSafe = document.getElementById("progressRing");
    const countSafe = document.getElementById("countdownBox");
    if (ringSafe) ringSafe.style.display = "none";
    if (countSafe) countSafe.style.display = "none";
  }
});

// üü¢ OPEN MODAL
window.openModal = function (name, cost, days, profit) {
  // ‚úÖ Safety check
  if (!name) {
    console.warn("openModal called without plan name!");
    return;
  }

  const modal = document.getElementById("planModal");

  // ‚úÖ Reset previous animation or style
  modal.style.display = "flex";
  modal.style.opacity = "0";
  modal.classList.remove("show");

  // ‚úÖ Fill modal details
  document.getElementById("mTitle").textContent = `BUY ${String(name).toUpperCase()}`;
  document.getElementById("mDays").textContent = `${days} days`;
  document.getElementById("mProfit").textContent = `${profit}%`;
  document.getElementById("mCost").textContent = `$${cost}`;
  document.getElementById("mWallet").textContent = `$${walletBalance.toFixed(2)}`;
  document.getElementById("mError").style.display = "none";

  // ‚úÖ Show with smooth transition
  requestAnimationFrame(() => {
    modal.classList.add("show");
    modal.style.opacity = "1";
  });

  // ‚úÖ Confirm button click event
  const confirmBtn = document.getElementById("mConfirm");

  // üîÑ Remove any previous event listener (so double click issue naa ho)
  confirmBtn.replaceWith(confirmBtn.cloneNode(true));
  const newConfirmBtn = document.getElementById("mConfirm");

  newConfirmBtn.onclick = async () => {
    if (walletBalance < cost) {
      document.getElementById("mError").style.display = "flex";
      showBalanceAlert();
      return;
    }

    const user = auth.currentUser;
    if (!user) return showCenterAlert("Please login first!");

    const activeQuery = query(
      collection(db, "buyhashrate"),
      where("userId", "==", user.uid),
      where("status", "==", "running")
    );
    const activeSnap = await getDocs(activeQuery);
    if (!activeSnap.empty) {
      showCenterAlert("Your plan is running, please wait until it‚Äôs closed!");
      closeModal();
      return;
    }

    const now = new Date();
    const next = new Date(now.getTime() + 86400000);
    const end = new Date(now.getTime() + days * 86400000);

    try {
  await addDoc(collection(db, "buyhashrate"), {
  userId: user.uid,
  planName: name,
  planCost: cost,
  dailyProfitPercent: profit,
  durationDays: days,
  remainingDays: days,  // ‚úÖ ye line fix hai
  startTime: serverTimestamp(),
  nextPayout: next,
  endTime: end,
  earnedProfit: 0,
  status: "running",
});


      walletBalance -= cost;
      lockedBalance += cost;
      await updateDoc(doc(db, "users", user.uid), { walletBalance, lockedBalance });

      document.getElementById("walletBalance").textContent = `$${walletBalance.toFixed(2)}`;
      document.getElementById("lockedBalance").textContent = `$${lockedBalance.toFixed(2)}`;
      showCenterAlert(`‚úÖ ${name} purchased successfully!`);
      closeModal();

    } catch (err) {
      console.error(err);
      showCenterAlert("Something went wrong!");
    }
  };
};


window.closeModal = function () {
  const modal = document.getElementById("planModal");
  modal.classList.remove("show");
  setTimeout(() => (modal.style.display = "none"), 300);
};

// Alert helpers
function showCenterAlert(message, duration = 3000) {
  const alertBox = document.getElementById("centerAlert");
  alertBox.textContent = message;
  alertBox.classList.add("show");
  setTimeout(() => {
    alertBox.style.animation = "fadeOut 0.5s forwards";
    setTimeout(() => {
      alertBox.classList.remove("show");
      alertBox.style.animation = "";
    }, 500);
  }, duration);
}

function showBalanceAlert() {
  const alertBox = document.getElementById("mError");
  alertBox.classList.add("show");
  setTimeout(() => {
    alertBox.classList.remove("show");
    setTimeout(() => (alertBox.style.display = "none"), 300);
  }, 3000);
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  // Har plan ke liye click listener auto add karega
  document.querySelectorAll(".plan").forEach(plan => {
    const name = plan.dataset.name;
    const cost = parseFloat(plan.dataset.cost);
    const days = parseInt(plan.dataset.days);
    const profit = parseFloat(plan.dataset.profit);
    const btn = plan.querySelector(".buy-btn");
    btn.addEventListener("click", () => openModal(name, cost, days, profit));
  });
});
</script>

<script>
  // üö´ Disable right click, select, drag
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("selectstart", e => e.preventDefault());
  document.addEventListener("dragstart", e => e.preventDefault());

  // üö´ Disable keyboard shortcuts (copy, paste, inspect, etc.)
  document.addEventListener("keydown", e => {
    if (
      e.key === "F12" ||
      (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
      (e.ctrlKey && (e.key === "U" || e.key === "C" || e.key === "X" || e.key === "V" || e.key === "S"))
    ) {
      e.preventDefault();
      return false;
    }
  });

  // üîí Silent DevTools detection (no popup)
  (function() {
    const devtools = /./;
    devtools.toString = function() {
      return ""; // no alert or console log
    };
    console.log("%c", devtools);
  })();

  // üîê Detect DevTools using resize trick (no popup)
  setInterval(() => {
    const threshold = 160;
    const widthDiff = window.outerWidth - window.innerWidth > threshold;
    const heightDiff = window.outerHeight - window.innerHeight > threshold;
    if (widthDiff || heightDiff) {
      // Optional: silently redirect or blank the page
      document.body.innerHTML = "";
    }
  }, 1000);

  // üß± Disable copy/paste/cut
  ["copy", "paste", "cut"].forEach(evt =>
    document.addEventListener(evt, e => e.preventDefault())
  );

  // üîÅ Freeze console methods silently
  Object.freeze(console);
  Object.freeze(window.console);
</script>


</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TrustDollar ‚Äî Secure Login</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">
<style>

body {
  font-family: "Poppins", sans-serif;
  margin: 0;
  padding: 70px 10px 90px; /* header + bottom nav space */
  background: #f9fafb;

  overflow-x: hidden;
  overflow-y: auto;
  padding-left: 14px;
  padding-right: 14px;
  -webkit-overflow-scrolling: touch;
}

/* Smooth scrolling + clean scrollbar fix */
html, body {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Hide scrollbar (Chrome, Edge, Safari) */
body::-webkit-scrollbar {
  width: 0px;
  background: transparent; /* invisible scrollbar track */
}

.login-box {
  margin-left: auto;
  margin-right: auto;
}

.login-box {
  width: 100%;
  max-width: 400px;
  background: #ffff;
  border-radius: 5px;
 
  overflow: hidden;
}

/* Tabs */
.tab-header {
  display: flex;
  background: #f9fafb;
  border-bottom: 2px solid #e5e7eb;
}

.tab {
  flex: 1;
  text-align: center;
  padding: 14px 0;
  cursor: pointer;
  font-weight: 600;
  color: #555;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: background 0.3s, color 0.3s;
}

.tab i {
  color: #16a34a;
}

.tab.active {
  color: #16a34a;
  background: #ecfdf5;
}

/* FIX ‚úÖ: Prevent movement on click by reserving underline space */
.tab::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%) scaleX(0);
  width: 60%;
  height: 3px;
  background: #16a34a;
  border-radius: 5px;
  transition: transform 0.3s ease;
}

.tab.active::after {
  transform: translateX(-50%) scaleX(1);
}

/* Form */
.form {
  padding: 24px 26px 30px;
}
.input-group {
  margin-bottom: 18px;
  position: relative;
}
.input-group label {
  font-size: 14px;
  color: #333;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
}
.input-group input,
.input-group select {
  width: 100%;
  padding: 12px 4px 12px 12px;
  border-radius: 5px;
  border: 1.5px solid #ccc;
  font-size: 15px;
  outline: none;
  transition: 0.3s;
  box-sizing: border-box;
}
.input-group input:focus,
.input-group select:focus {
  border-color: #16a34a;
  
}

/* Country + phone */
.phone-row {
  display: flex;
  gap: 8px;
  align-items: center;
}
.phone-row select {
  width: 90px;
  padding: 12px 8px;
  border-radius: 5px;
  border: 1.5px solid #ccc;
  font-size: 14px;
  color: #333;
  background: #fff;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%2316a34a' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5H7z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 14px;
}

/* Eye icon */
.eye-icon {
  position: absolute;
  right: 12px;
  top: 38px;
  color: #888;
  font-size: 18px;
  cursor: pointer;
  transition: 0.3s;
}
.eye-icon:hover {
  color: #16a34a;
}

.actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
  font-size: 13px;
  color: #444;
}
.actions input {
  accent-color: #16a34a;
}

button {
  padding: 12px;
  border-radius: 5px;
}

/* sirf normal single buttons full width hon */
.form > button {
  width: 100%;
}

/* btn-row ke andar width auto */
.btn-row button {
  width: auto;
  flex: 1;
}

button:hover {
  background: linear-gradient(135deg, #15803d, #16a34a);
}
.register-btn {
  margin-top: 10px;
  background: none;
  border: 2px solid #16a34a;
  color: #16a34a;
  font-weight: 600;
}
.register-btn:hover {
  background: #16a34a;
  color: #fff;
}

.form-section {
  display: none;
}
.form-section.active {
  display: block;
}

/* =========================
   üè¶ BANK-STYLE POPUP MODAL
   ========================= */

.popup-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;

  background: rgba(0, 0, 0, 0.35);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);

  opacity: 0;
  pointer-events: none;
  transition: opacity 0.35s ease;
  z-index: 3000;
}

.popup-overlay.show {
  opacity: 1;
  pointer-events: auto;
}

.popup {
  background: #ffffff;
  min-width: 260px;
  max-width: 90%;
  padding: 22px 26px;
  border-radius: 10px;

  text-align: center;
  font-size: 15px;
  font-weight: 600;
  color: #0f172a;

  box-shadow: 0 12px 35px rgba(0,0,0,0.18);

  transform: translateY(12px) scale(0.96);
  opacity: 0;
  transition:
    transform 0.35s cubic-bezier(0.25, 1, 0.3, 1),
    opacity 0.35s ease;
}

/* Show animation */
.popup-overlay.show .popup {
  transform: translateY(0) scale(1);
  opacity: 1;
}

/* Success / Error accent */
.popup.success {
  border-left: 5px solid #16a34a;
}

.popup.error {
  border-left: 5px solid #dc2626;
}


/* ‚úÖ Validation feedback */
.valid-msg {
  font-size: 13px;
  margin-top: 4px;
  font-weight: 500;
}
.valid-msg.error {
  color: #dc2626; /* red */
}
.valid-msg.success {
  color: #16a34a; /* green */
}
.input-group input.invalid {
  border-color: #dc2626;
  box-shadow: 0 0 5px rgba(220,38,38,0.2);
}
.input-group input.valid {
  border-color: #16a34a;
  box-shadow: 0 0 5px rgba(22,163,74,0.2);
}

input.valid {
  border: 2px solid green;
  outline: none;
}

input.invalid {
  border: 2px solid red;
  outline: none;
}

/* Warning fade-in animation */
@keyframes fadeInWarning {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}

div[style*="Security Notice"] {
  animation: fadeInWarning 0.6s ease-out;
}




/* üéÅ Gift Card ‚Äî SAME SIZE AS LOGIN BOX */
.gift-card {
  width: 100%;
  max-width: 400px;        /* SAME AS LOGIN BOX */
  margin: 20px auto 0;
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  overflow: hidden;        /* IMPORTANT: so image fits clean */
  transition: 0.3s;
}

/* IMAGE FULL WIDTH */
.gift-wrapper {
  width: 100%;
  padding: 0;               /* remove all side padding */
  margin: 0;
  border-radius: 5px;
  background: none;
  box-shadow: none;
}

.gift-image {
  width: 100%;              /* FULL width */
  height: auto;
  display: block;
  border-radius: 0;
}

/* TITLE SAME WIDTH */
.gift-title {
  padding: 14px 0 16px;
  font-size: 18px;
  font-weight: 700;
  color: #222;
}

.gift-title .brand {
  background: linear-gradient(90deg, #16a34a, #22c55e);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Hover effect clean */
.gift-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.12);
}


.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  text-align: center;
  padding: 10px;
  font-size: 18px;
  font-weight: bold;
  background: #ffffff;
  color: #000000;
 
  z-index: 1000;
}


h2 {
  margin-top: 40px; /* üü¢ Add some breathing space on top */
  margin-bottom: 20px; /* space between header & login box */
  text-align: center;
  color: #16a34a;
  font-weight: 700;
}
@media (min-width: 768px) {
  h2 {
    margin-top: 60px;
    margin-bottom: 30px;
  }
}

.spinner {
  width: 16px;
  height: 16px;
  border: 2px solid #ccc;
  border-top: 2px solid #16a34a;
  border-radius: 50%;
  display: inline-block;
  animation: spin 0.8s linear infinite;
  margin-left: 6px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* üî• Login + Register side by side */
.btn-row {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.btn-row button {
  flex: 1;
  padding: 12px;
  font-size: 15px;
}

/* Login button thoda strong */
.login-btn {
  background: linear-gradient(135deg, #16a34a, #22c55e);
  color: #fff;
  font-weight: 700;
}

/* Register outline style */
.register-btn {
  background: transparent;
  border: 2px solid #16a34a;
  color: #16a34a;
  font-weight: 600;
  margin-top: 0; /* üëà important */
}

.register-btn:hover {
  background: #16a34a;
  color: #fff;
}
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  text-align: center;
  padding: 10px 10px 6px;
  font-size: 18px;
  font-weight: bold;
  background: #ffffff;
  color: #000000;
  z-index: 1000;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}

/* üîπ Sub text inside header */
.header-subtext {
  margin-top: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  font-size: 12.5px;
  font-weight: 500;
  color: #166534;
  white-space: nowrap;
  overflow: hidden;
}

/* Live dot */
.header-subtext .dot {
  width: 7px;
  height: 7px;
  background: #16a34a;
  border-radius: 50%;
  animation: pulse 1.5s infinite;
  flex-shrink: 0;
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.4); opacity: 0.6; }
  100% { transform: scale(1); opacity: 1; }
}

/* Typing text */
#typingText {
  overflow: hidden;
  text-overflow: ellipsis;
}

/* body spacing adjust (IMPORTANT) */
body {
  padding-top: 64px; /* header + subtext height */
}

/* üîê Multi Security Section */
.login-security-multi {
  margin-top: 18px;
  padding-top: 14px;
  border-top: 1px dashed #e5e7eb;
  font-size: 12.8px;
  color: #475569;
}

/* Main title */
.security-main-title {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  font-weight: 600;
  color: #166534;
  margin-bottom: 10px;
}

.security-main-title i {
  color: #16a34a;
}

/* Each item */
.security-item {
  display: flex;
  gap: 10px;
  margin-bottom: 8px;
}

/* Number circle */
.sec-no {
  width: 20px;
  height: 20px;
  background: #ffff;
  color: #166534;
  border-radius: 5px;
  font-size: 11px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

/* Heading */
.security-item h4 {
  margin: 0;
  font-size: 12.5px;
  font-weight: 600;
  color: #0f172a;
}

/* Text */
.security-item p {
  margin: 2px 0 0;
  font-size: 12px;
  line-height: 1.55;
  color: #475569;
}
/* =========================
   üîß FINAL CENTER + SCROLL FIX
   ========================= */

/* 1Ô∏è‚É£ Browser ko clear scroll owner do */
html {
  height: 100%;
  scroll-behavior: smooth;
}

body {
  min-height: 100%;
  margin: 0 !important;

  /* header + bottom nav space */
  padding-top: 70px !important;
  padding-bottom: 90px !important;
  padding-left: 16px !important;
  padding-right: 16px !important;

  background: #f9fafb;
  overflow-x: hidden !important;
  overflow-y: auto !important;

  -webkit-overflow-scrolling: touch;
}

/* ‚ùå force scrollbar hide mat karo */
body::-webkit-scrollbar {
  width: 6px;
}
body::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.15);
  border-radius: 5px;
}

/* 2Ô∏è‚É£ Login box PERFECT CENTER */
.login-box {
  max-width: 400px !important;
  width: 100%;
  margin: 0 auto !important;
}

/* 3Ô∏è‚É£ Security section SAME LINE + SAME WIDTH */
.login-security-multi {
  max-width: 400px !important;
  width: 100%;
  margin: 14px auto 0 !important;
  padding-left: 12px;
  padding-right: 12px;
  box-sizing: border-box;
}

/* 4Ô∏è‚É£ Gift card bhi exact center */
.gift-card {
  max-width: 400px !important;
  width: 100%;
  margin: 20px auto 0 !important;
}

/* 5Ô∏è‚É£ Header text true center */
.header,
.header-subtext {
  text-align: center;
}

/* üîí Input wrapper must be relative */
.input-group {
  position: relative;
}

/* üîπ Status icon base */
.status-icon {
  position: absolute;
  right: 12px;
  top: 38px;              /* input ke center ke paas */
  font-size: 16px;
  font-weight: 700;
  line-height: 1;
  pointer-events: none;  /* click block na ho */
  transition: color 0.2s ease, transform 0.2s ease;
}

/* ‚è≥ Loading */
.status-icon.loading {
  color: #9ca3af;        /* gray */
  animation: pulseIcon 1.2s infinite;
}

/* ‚úî Success */
.status-icon.success {
  color: #16a34a;        /* green */
  transform: scale(1.05);
}

/* ‚ùå Error */
.status-icon.error {
  color: #dc2626;        /* red */
}

/* üîÑ Subtle pulse animation */
@keyframes pulseIcon {
  0%   { opacity: 0.6; }
  50%  { opacity: 1; }
  100% { opacity: 0.6; }
}

/* üì± Mobile tweak */
@media (max-width: 480px) {
  .status-icon {
    top: 36px;
    font-size: 15px;
  }
}

</style>
</head>
<body>
<div class="header">
  ùêíùêûùêúùêÆùê´ùêû ùêòùê®ùêÆùê´ ùêÖùêÆùêßùêùùê¨ ùê∞ùê¢ùê≠ùê° ùêíùêöùêüùêû
  <div class="header-subtext">
    <span class="dot"></span>
    <span id="typingText"></span>
  </div>
</div>

<div class="popup-overlay" id="popupOverlay">
  <div id="popup" class="popup"></div>
</div>

<div class="login-box">
  <div class="tab-header">
    <div class="tab active" id="emailTab"><i class="fas fa-envelope"></i> Email</div>
       <div class="tab" id="phoneTab"><i class="fas fa-phone"></i> Phone</div>
        <div class="tab" id="userTab"><i class="fas fa-user"></i> Username</div>
  </div>

  <div class="form">
<!-- üìû Phone -->
<div class="form-section" id="phoneForm">

  <div class="input-group">
    <label><i class="fas fa-phone"></i> Phone Number</label>
    <div class="phone-row">
      <input type="tel" id="login-identifier" placeholder="Please enter phone number" />
      <span id="idStatus" class="status-icon"></span>
    </div>
  </div>

  <div class="input-group">
    <label><i class="fas fa-lock"></i> Password</label>
    <input type="password" id="login-password" placeholder="Password" />
    <i class="fa-regular fa-eye eye-icon" id="toggle-password"></i>
    <span id="passStatus" class="status-icon"></span>
  </div>

  <div class="actions">
    <label><input type="checkbox" /> Remember password</label>
    <a href="#" id="forgot-btn" style="color:#16a34a;font-weight:600;">Forgot?</a>
  </div>

  <div class="btn-row">
    <button class="login-btn" id="loginBtn">Login</button>
    <button class="register-btn">Register</button>
  </div>

</div>


<!-- üìß Email -->
<div class="form-section active" id="emailForm">

  <div class="input-group">
    <label><i class="fas fa-envelope"></i> Email</label>
    <input type="email" id="email-login" placeholder="Please enter email address" />
    <span class="status-icon" id="emailStatus"></span>

  </div>

  <div class="input-group">
    <label><i class="fas fa-lock"></i> Password</label>
    <input type="password" id="email-password" placeholder="Password" />
    <i class="fa-regular fa-eye eye-icon" id="toggle-email-pass"></i>
  </div>

  <div class="actions">
    <label><input type="checkbox" id="remember-email" /> Remember password</label>
    <a href="#" id="forgot-email-btn" style="color:#16a34a;font-weight:600;">Forgot?</a>
  </div>

  <div class="btn-row">
    <button class="login-btn" id="emailLoginBtn">Login</button>
    <button class="register-btn">Register</button>
  </div>

</div>


<!-- üë§ Username -->
<div class="form-section" id="userForm">

  <div class="input-group">
    <label><i class="fas fa-user"></i> Username</label>
    <input type="text" id="user-login" placeholder="Enter your username" />
    <span class="status-icon" id="userStatus"></span>

  </div>

  <div class="input-group">
    <label><i class="fas fa-lock"></i> Password</label>
    <input type="password" id="user-password" placeholder="Password" />
    <i class="fa-regular fa-eye eye-icon" id="toggle-user-pass"></i>
  </div>

  <div class="actions">
    <label><input type="checkbox" id="remember-user" /> Remember password</label>
    <a href="#" id="forgot-user-btn" style="color:#16a34a;font-weight:600;">Forgot?</a>
  </div>

  <div class="btn-row">
    <button class="login-btn" id="userLoginBtn">Login</button>
    <button class="register-btn">Register</button>
  </div>
</div>
</div>
</div>
<!-- üîê Account Security Guidelines -->
<div class="login-security-multi">

  <div class="security-main-title">
    <i class="fas fa-shield-alt"></i>
    Account Security Guidelines
  </div>

  <div class="security-item">
    <span class="sec-no">1</span>
    <div>
      <h4>Keep Your Password Private</h4>
      <p>Never share your password, OTP, or login details with anyone.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">2</span>
    <div>
      <h4>Avoid Public Devices</h4>
      <p>Do not log in from public computers or shared devices.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">3</span>
    <div>
      <h4>Do Not Use Another Phone</h4>
      <p>Avoid accessing your account from someone else‚Äôs mobile phone.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">4</span>
    <div>
      <h4>Limit Wrong Password Attempts</h4>
      <p>Please do not try incorrect passwords more than 10 times.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">5</span>
    <div>
      <h4>Account Lock Protection</h4>
      <p>If your account is locked, wait 10 minutes before trying again.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">6</span>
    <div>
      <h4>Always Log Out</h4>
      <p>Make sure to log out properly after finishing your session.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">7</span>
    <div>
      <h4>Use a Secure Network</h4>
      <p>Login only using trusted and secure internet connections.</p>
    </div>
  </div>

  <div class="security-item">
    <span class="sec-no">8</span>
    <div>
      <h4>Report Suspicious Activity</h4>
      <p>If you notice any unusual activity, contact support immediately.</p>
    </div>
  </div>

</div>

</div>
<!-- üéÅ Gift Animation Card -->
<div class="card gift-card">
 
  <div class="gift-wrapper">
    <img 
      src="https://miro.medium.com/v2/resize:fit:996/1*V1hv3LGgo1W4wE3Az0mAnw.gif" 
      alt="TrustDollar Gift Animation" 
      class="gift-image"
      loading="lazy"
    />


  </div>
   
</div>
<!-- ‚úÖ BTCInvest Auto Smart Bottom Navbar -->
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet">

<style>
:root {
  --nav-bg: #fff;
  --nav-text: #444;
  --nav-border: rgba(0, 0, 0, 0.08);
}

[data-theme="dark"] {
  --nav-bg: #0f0f0f;
  --nav-text: #ccc;
  --nav-border: rgba(255, 255, 255, 0.1);
}

/* üîπ Navbar Base (height reduced) */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: var(--nav-bg);
  border-top: 1px solid var(--nav-border);
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 10px 0; /* üëà thinner padding */
  z-index: 9999;
  box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.05);
}

/* üîπ Nav items (slimmer text + less spacing) */
.bottom-nav .nav-item {
  flex: 1;
  text-align: center;
  color: var(--nav-text);
  text-decoration: none;
  font-size: 10px; /* üëà smaller text */
  position: relative;
  padding: 4px 0; /* üëà less padding */
  transition: all 0.3s ease;
}

/* üîπ Icon (reduced size + gap) */
.bottom-nav .nav-item i {
  font-size: 18px; /* üëà smaller icons (was 22px) */
  display: block;
  opacity: 0.75;
  margin-bottom: 2px; /* üëà smaller gap */
  transition: all 0.3s ease;
}

/* üîπ Text */
.bottom-nav .nav-item span {
  opacity: 0.7;
  transition: all 0.3s ease;
}

/* üîπ Divider lines */
.bottom-nav .nav-item:not(:last-child)::after {
  content: "";
  position: absolute;
  right: 0;
  top: 25%;
  width: 1px;
  height: 50%;
  background: var(--nav-border);
}

/* üîπ Active State (icons glow thoda soft) */
.bottom-nav .nav-item.active i {
  transform: scale(1.1);
  opacity: 1;
  animation: bulbGlow 1.6s ease-in-out infinite alternate;
}
.bottom-nav .nav-item.active span {
  opacity: 1;
  font-weight: 600;
}

/* Active colors */
.bottom-nav .nav-item:nth-child(1).active i { color: #00c853; }
.bottom-nav .nav-item:nth-child(2).active i { color: #ffc107; }
.bottom-nav .nav-item:nth-child(3).active i { color: #ff3b30; }
.bottom-nav .nav-item:nth-child(4).active i { color: #00bcd4; }

@keyframes bulbGlow {
  from { filter: brightness(1); }
  to { filter: brightness(1.6); }
}

/* üîπ Ripple (same) */
.ripple {
  position: absolute;
  border-radius: 50%;
  transform: scale(0);
  animation: ripple 0.6s linear;
  background: rgba(0, 200, 83, 0.15);
}
@keyframes ripple {
  to { transform: scale(3); opacity: 0; }
}

/* üîπ Responsive tuning */
@media (max-width: 480px) {
  .bottom-nav .nav-item i {
    font-size: 17px;
  }
  .bottom-nav .nav-item span {
    font-size: 9.5px;
  }
}
</style>

<!-- ‚úÖ HTML Navbar -->
<div class="bottom-nav" id="mainNav">
  <a href="index.html" class="nav-item">
    <i class="ri-home-5-fill"></i>
    <span>Home</span>
  </a>

  <a href="login.html" class="nav-item">
    <i class="ri-bar-chart-2-fill"></i>
    <span>Mining</span>
  </a>

  <a href="login.html" class="nav-item">
    <i class="ri-gift-fill"></i>
    <span>Promotion</span>
  </a>

  <a href="login.html" class="nav-item">
    <i class="ri-user-3-fill"></i>
    <span>Account</span>
  </a>
</div>

<script>
/* üåó Auto theme detect */
function detectTheme() {
  const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  document.documentElement.setAttribute("data-theme", prefersDark ? "dark" : "light");
}
detectTheme();
window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", detectTheme);

/* üí° Auto highlight based on page URL */
const currentPage = window.location.pathname.split("/").pop().toLowerCase();
document.querySelectorAll(".bottom-nav .nav-item").forEach(item => {
  const href = item.getAttribute("href")?.toLowerCase();
  if (currentPage === href) item.classList.add("active");
});

/* üåä Ripple effect + manual highlight */
document.querySelectorAll(".bottom-nav .nav-item").forEach((item) => {
  item.addEventListener("click", (e) => {
    // highlight
    document.querySelector(".bottom-nav .nav-item.active")?.classList.remove("active");
    item.classList.add("active");

    // ripple
    const ripple = document.createElement("span");
    ripple.classList.add("ripple");
    const rect = item.getBoundingClientRect();
    ripple.style.left = `${e.clientX - rect.left}px`;
    ripple.style.top = `${e.clientY - rect.top}px`;
    item.appendChild(ripple);
    setTimeout(() => ripple.remove(), 500);
  });
});
</script>




<script>
const tabs = document.querySelectorAll(".tab");
const sections = {
  phoneTab: document.getElementById("phoneForm"),
  emailTab: document.getElementById("emailForm"),
  userTab: document.getElementById("userForm"),
};
tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");
    Object.values(sections).forEach(s => s.classList.remove("active"));
    sections[tab.id].classList.add("active");
  });
});
</script>


<!-- üî• Firebase Script -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
import { getFirestore, doc, getDoc, updateDoc, setDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
import { collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";


const firebaseConfig = {
  apiKey: "AIzaSyDEQYPJFxQv8yFHptrTqoLHOn2L0PpgVhc",
  authDomain: "btcinvest-c0e25.firebaseapp.com",
  projectId: "btcinvest-c0e25",
  storageBucket: "btcinvest-c0e25.firebasestorage.app",
  messagingSenderId: "204937458487",
  appId: "1:204937458487:web:cc27ece1249999279f60b2",
  measurementId: "G-HG0Q8ZHT6G"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// ‚úÖ Get User's Public IP
async function getUserIP() {
  try {
    const res = await fetch("https://api.ipify.org?format=json");
    const data = await res.json();
    return data.ip;
  } catch (e) {
    console.error("‚ùå Unable to fetch IP:", e);
    return "Unknown";
  }
}


const popup = document.getElementById("popup");
const popupOverlay = document.getElementById("popupOverlay");

function showPopup(msg, type = "success") {
  // text + type set
  popup.textContent = msg;
  popup.className = `popup ${type}`;

  // show with smooth animation
  popupOverlay.classList.add("show");

  // auto hide (smooth)
  setTimeout(() => {
    popupOverlay.classList.remove("show");
  }, 2200);
}

document.getElementById("toggle-password").addEventListener("click", () => {
  const pass = document.getElementById("login-password");
  pass.type = pass.type === "password" ? "text" : "password";
});


// ‚úÖ Final Unified Live Validation (Phone + Email + Username)



/* üïí Button Countdown Function */
function startButtonCountdown(button, secondsLeft) {
  button.disabled = true;
  button.classList.add("locked");
  const originalHTML = button.innerHTML;

  function updateCountdown() {
    const minutes = Math.floor(secondsLeft / 60);
    const seconds = secondsLeft % 60;
    button.innerHTML = `<span>üîí Locked (${minutes}:${seconds.toString().padStart(2, "0")})</span>`;
    secondsLeft--;

    if (secondsLeft < 0) {
      clearInterval(timer);
      button.disabled = false;
      button.classList.remove("locked");
      button.innerHTML = "Login";
      showPopup("üîì Account unlocked. Try again.", "success");
    }
  }

  updateCountdown();
  const timer = setInterval(updateCountdown, 1000);
}


/* üîÅ Forgot Password ‚Äì works for phone OR email */
document.getElementById("forgot-btn").addEventListener("click", async () => {
  const identifier = document.getElementById("login-identifier").value.trim().toLowerCase();


  if (!identifier) return showPopup("Enter phone number or email", "error");

  let emailToSend = identifier;

  // üîç Agar user phone ya username daale to email Firestore se nikal le
  if (!identifier.includes("@")) {
    try {
      const ref = doc(db, "logins", identifier);
      const snap = await getDoc(ref);
      if (!snap.exists()) return showPopup("Account not found", "error");
      emailToSend = snap.data().email;
    } catch (err) {
      console.error(err);
      return showPopup("Error verifying account", "error");
    }
  }

  try {
    await sendPasswordResetEmail(auth, emailToSend);
    showPopup("Password reset link sent to your email.", "success");
  } catch (e) {
    console.error(e);
    showPopup("Error sending reset link.", "error");
  }
});


// üß† Email tab: toggle password visibility
document.getElementById("toggle-email-pass").addEventListener("click", () => {
  const pass = document.getElementById("email-password");
  pass.type = pass.type === "password" ? "text" : "password";
});

// üß† Email tab: forgot password
document.getElementById("forgot-email-btn").addEventListener("click", async () => {
  const email = document.getElementById("email-login").value.trim();
  if (!email.includes("@")) return showPopup("Enter valid email address", "error");
  try {
    await sendPasswordResetEmail(auth, email);
    showPopup("Password reset link sent to your email.", "success");
  } catch (e) {
    showPopup("Error sending reset link.", "error");
  }
});

// üß† Email tab: remember password feature
const emailField = document.getElementById("email-login");
const passwordField = document.getElementById("email-password");
const rememberBox = document.getElementById("remember-email");

// ‚úÖ Load saved credentials on page load
window.addEventListener("DOMContentLoaded", () => {
  const savedEmail = localStorage.getItem("savedEmail");
  const savedPass = localStorage.getItem("savedPass");
  if (savedEmail && savedPass) {
    emailField.value = savedEmail;
    passwordField.value = savedPass;
    rememberBox.checked = true;
  }
});

// üë§ USERNAME TAB: toggle password visibility
document.getElementById("toggle-user-pass").addEventListener("click", () => {
  const pass = document.getElementById("user-password");
  pass.type = pass.type === "password" ? "text" : "password";
});

// üë§ USERNAME TAB: forgot password (via stored email in Firestore)
document.getElementById("forgot-user-btn").addEventListener("click", async () => {
  const username = document.getElementById("user-login").value.trim().toLowerCase();
  if (!username) return showPopup("Enter your username", "error");

  try {
    // username ke basis pe email nikal lo (Firestore se)
    const ref = doc(db, "logins", username);
    const snap = await getDoc(ref);
    if (!snap.exists()) return showPopup("User not found", "error");

    const email = snap.data().email;
    await sendPasswordResetEmail(auth, email);
    showPopup("Password reset link sent to your email.", "success");
  } catch (e) {
    console.error(e);
    showPopup("Error sending reset link.", "error");
  }
});

// üë§ USERNAME TAB: remember password feature
const userField = document.getElementById("user-login");
const userPassField = document.getElementById("user-password");
const rememberUserBox = document.getElementById("remember-user");

// ‚úÖ Load saved username credentials
window.addEventListener("DOMContentLoaded", () => {

  const savedUser = localStorage.getItem("savedUser");
  const savedUserPass = localStorage.getItem("savedUserPass");
  if (savedUser && savedUserPass) {
    userField.value = savedUser;
    userPassField.value = savedUserPass;
    rememberUserBox.checked = true;
  }
});
/* ================= üî• UNIVERSAL LOGIN FUNCTION ================= */
async function universalLogin(identifier, password, loginBtn) {
  if (!identifier || !password) return showPopup("Please enter login details", "error");

  loginBtn.disabled = true;
  loginBtn.innerHTML = `<span class="spinner" style="margin-right:8px;"></span> Logging in...`;
  loginBtn.style.opacity = "0.8";

  try {
    let email = "";
    const dbIdentifier = identifier.trim().toLowerCase();

    // üîç Identify email from input type (phone / username / direct email)
    if (dbIdentifier.includes("@")) {
      email = dbIdentifier;
    } else {
      const ref = doc(db, "logins", dbIdentifier);
      const snap = await getDoc(ref);
      if (!snap.exists()) {
        showPopup("Account not found", "error");
        return;
      }
      email = snap.data().email;
    }

    const userRef = doc(db, "users", email);
    const userSnap = await getDoc(userRef);
    const userData = userSnap.exists() ? userSnap.data() : {};
    const now = Date.now();
    const MAX_FAILED = 3;
    const LOCK_MINUTES = 15;

    // ‚õî Lock check
    const lockUntil = Number(userData.lockUntil || 0);
    if (lockUntil && now < lockUntil) {
      const remainingSeconds = Math.ceil((lockUntil - now) / 1000);
      startButtonCountdown(loginBtn, remainingSeconds);
      return;
    }

// ‚úÖ Try Login
await signInWithEmailAndPassword(auth, email, password);

// ‚úÖ Get current user IP
const userIP = await getUserIP();

// ‚úÖ Find the user's Firestore document using email

const usersRef = collection(db, "users");
const q = query(usersRef, where("email", "==", email));
const snap = await getDocs(q);

if (!snap.empty) {
  const userDoc = snap.docs[0];
  const userData = userDoc.data();

  // ‚úÖ Prepare update object
  const updates = {
    failedAttempts: 0,
    lockUntil: 0,
    lastLogin: new Date().toISOString()
  };

  // ‚úÖ Agar IP missing hai ya Unknown hai, to add karo
  if (!userData.ipAddress || userData.ipAddress === "Unknown") {
    updates.ipAddress = userIP;
    console.log("‚úÖ IP updated successfully:", userIP);
  } else {
    console.log("‚ÑπÔ∏è IP already exists:", userData.ipAddress);
  }

  // ‚úÖ Firestore me ek hi updateDoc call se sab update
  await updateDoc(userDoc.ref, updates);

} else {
  console.warn("‚ö†Ô∏è No user found with email:", email);
}

// ‚úÖ Success popup aur redirect
showPopup("‚úÖ Login successful!", "success");
setTimeout(() => (window.location.href = "Dashboard.html"), 2000);



  } catch (error) {
    console.error("Login error:", error);

    let email = "";
    const dbIdentifier = identifier.trim().toLowerCase();

    if (dbIdentifier.includes("@")) {
      email = dbIdentifier;
    } else {
      const ref = doc(db, "logins", dbIdentifier);
      const snap = await getDoc(ref);
      if (!snap.exists()) return showPopup("User not found", "error");
      email = snap.data().email;
    }

    const userRef = doc(db, "users", email);
    const userSnap = await getDoc(userRef);
    const userData = userSnap.exists() ? userSnap.data() : {};
    let newAttempts = (userData.failedAttempts || 0) + 1;
    const updates = { failedAttempts: newAttempts };

    const MAX_FAILED = 5;

    const LOCK_MINUTES = 15;

    if (newAttempts >= MAX_FAILED) {
      updates.lockUntil = Number(Date.now() + LOCK_MINUTES * 60 * 1000);
      showPopup(`‚ùå Too many attempts! Locked for ${LOCK_MINUTES} minutes.`, "error");
      startButtonCountdown(loginBtn, LOCK_MINUTES * 60);
    } else if (newAttempts === MAX_FAILED - 1) {
      showPopup(`‚ö†Ô∏è One more wrong attempt will lock your account!`, "error");
    } else {
      showPopup("Incorrect password.", "error");
    }

    await setDoc(userRef, updates, { merge: true });

  } finally {
    loginBtn.disabled = false;
    loginBtn.innerHTML = "Login";
    loginBtn.style.opacity = "1";
  }
}

/* ================= ‚öôÔ∏è BUTTON EVENTS ================= */

// üì± PHONE LOGIN
document.getElementById("loginBtn").addEventListener("click", () => {
  const identifier = document.getElementById("login-identifier").value;
  const password = document.getElementById("login-password").value;
  const loginBtn = document.getElementById("loginBtn");
  universalLogin(identifier, password, loginBtn);
});

// üìß EMAIL LOGIN
document.getElementById("emailLoginBtn").addEventListener("click", () => {
  const identifier = document.getElementById("email-login").value;
  const password = document.getElementById("email-password").value;
  const loginBtn = document.getElementById("emailLoginBtn");
  universalLogin(identifier, password, loginBtn);
});

// üë§ USERNAME LOGIN
document.getElementById("userLoginBtn").addEventListener("click", () => {
  const identifier = document.getElementById("user-login").value;
  const password = document.getElementById("user-password").value;
  const loginBtn = document.getElementById("userLoginBtn");
  universalLogin(identifier, password, loginBtn);
});



document.querySelectorAll('.register-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    window.location.href = "register.html";
  });
});




  let liveTimer;

function debounceCheck(fn, delay = 500) {
  clearTimeout(liveTimer);
  liveTimer = setTimeout(fn, delay);
}

// 1 

//2
async function liveCheck(value, type, statusEl) {
  if (!value) {
    statusEl.textContent = "";
    statusEl.className = "status-icon";
    return;
  }

  statusEl.textContent = "‚è≥";
  statusEl.className = "status-icon loading";

  try {
    let exists = false;

    if (type === "email") {
      // ‚úÖ EMAIL ‚Üí query
      const q = query(
        collection(db, "logins"),
        where("email", "==", value.toLowerCase())
      );
      const snap = await getDocs(q);
      exists = !snap.empty;

    } else {
      // ‚úÖ PHONE / USERNAME ‚Üí doc id
      const ref = doc(db, "logins", value.toLowerCase());
      const snap = await getDoc(ref);
      exists = snap.exists();
    }

    if (exists) {
      statusEl.textContent = "‚úî";
      statusEl.className = "status-icon success";
    } else {
      statusEl.textContent = "‚úñ";
      statusEl.className = "status-icon error";
    }

  } catch (e) {
    console.error(e);
    statusEl.textContent = "‚úñ";
    statusEl.className = "status-icon error";
  }
}

//3333
const phoneInput = document.getElementById("login-identifier");
const phoneStatus = document.getElementById("idStatus");

phoneInput.addEventListener("input", () => {
  if (!document.getElementById("phoneForm").classList.contains("active")) return;

  phoneInput.value = phoneInput.value.replace(/\D/g, "");

  if (phoneInput.value.length !== 10) {
    phoneStatus.textContent = "‚úñ";
    phoneStatus.className = "status-icon error";
    return;
  }

  phoneStatus.textContent = "‚è≥";
  phoneStatus.className = "status-icon loading";

  debounceCheck(() => {
    liveCheck(phoneInput.value, "phone", phoneStatus);
  });
});
///7777
const userInput = document.getElementById("user-login");
const userStatus = document.getElementById("userStatus");

userInput.addEventListener("input", () => {
  const value = userInput.value.trim();

  if (value.length < 3) {
    userStatus.textContent = "‚úñ";
    userStatus.className = "status-icon error";
    return;
  }

  userStatus.textContent = "‚è≥";
  userStatus.className = "status-icon loading";

  debounceCheck(() => {
    liveCheck(value, "user", userStatus);
  });
});


</script>
<script>
const messages = [
  "Login using Email, Phone or Username",
  "Your account is protected with secure verification",
  "Forgot password? Use the reset option anytime",
  "Choose your login tab above to continue safely",
  "Please do not try more than 10 incorrect passwords",
  "If your account gets locked, wait 10 minutes and try again"
];

let msgIndex = 0;
let charIndex = 0;
const typingEl = document.getElementById("typingText");
const typingSpeed = 45;
const holdTime = 1600;

function typeMessage() {
  if (charIndex < messages[msgIndex].length) {
    typingEl.textContent += messages[msgIndex].charAt(charIndex);
    charIndex++;
    setTimeout(typeMessage, typingSpeed);
  } else {
    setTimeout(eraseMessage, holdTime);
  }
}

function eraseMessage() {
  if (charIndex > 0) {
    typingEl.textContent = messages[msgIndex].substring(0, charIndex - 1);
    charIndex--;
    setTimeout(eraseMessage, 25);
  } else {
    msgIndex = (msgIndex + 1) % messages.length;
    setTimeout(typeMessage, 300);
  }
}

typeMessage();
</script>
</body>
</html>

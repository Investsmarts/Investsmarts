<!-- ✅ Primary Address Page -->
<div style="text-align:center;">
  <h2 style="margin-bottom:10px;">Primary Address</h2>
  <p style="font-size:14px; color:#666;">Your saved primary wallet address</p>

  <div id="primaryBox" style="
    margin:15px auto;
    padding:15px;
    border:1.5px solid #28a745;
    border-radius:10px;
    background:#f9fffa;
    color:#28a745;
    font-weight:600;
    font-size:14px;
    word-break: break-all;
  ">
    Loading...
  </div>

  <button id="copyBtn" style="
    background:#28a745;
    color:#fff;
    border:none;
    border-radius:8px;
    padding:8px 16px;
    font-size:14px;
    font-weight:bold;
    cursor:pointer;
  ">Copy Address</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDEQYPJFxQv8yFHptrTqoLHOn2L0PpgVhc",
    authDomain: "btcinvest-c0e25.firebaseapp.com",
    projectId: "btcinvest-c0e25",
    storageBucket: "btcinvest-c0e25.firebasestorage.app",
    messagingSenderId: "204937458487",
    appId: "1:204937458487:web:cc27ece1249999279f60b2",
    measurementId: "G-HG0Q8ZHT6G"
  };

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const primaryBox = document.getElementById("primaryBox");
const copyBtn = document.getElementById("copyBtn");
let currentAddress = "";
let currentWallet = "";

onAuthStateChanged(auth, async (user) => {
  if (user) {
    const ref = doc(db, "users", user.uid);
    const snap = await getDoc(ref);
    if (snap.exists()) {
      const data = snap.data();
      currentWallet = data.primaryWallet || "❌ No wallet selected";
      currentAddress = data.primaryAddress || "❌ No address saved yet";

      primaryBox.innerHTML = `
        <div style="margin-bottom:8px; font-size:14px; color:#28a745;">
          <b>Wallet:</b> ${currentWallet} 
          ${currentWallet !== "❌ No wallet selected" 
            ? '<span style="background:#28a745;color:#fff;font-size:11px;padding:3px 6px;border-radius:6px;margin-left:6px;">Primary</span>' 
            : ""}
        </div>
        <div style="
          font-size:13px;
          color:#333;
          border:1px solid #ccc;
          padding:6px 10px;
          border-radius:6px;
          background:#fff;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        ">
          <b>Address:</b> ${currentAddress}
        </div>
      `;
    } else {
      primaryBox.textContent = "❌ No user data found";
    }
  } else {
    primaryBox.textContent = "⚠️ Please login first";
  }
});

copyBtn.addEventListener("click", () => {
  if (currentAddress && currentAddress !== "❌ No address saved yet") {
    navigator.clipboard.writeText(currentAddress);
    alert("✅ Address copied!");
  }
});


</script>
